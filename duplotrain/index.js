(async function(t,e){const o=await e("../legoble/hub.js"),r=t.ArgumentType,l=t.BlockType,i=t.Cast,a=t.formatMessage,n=()=>new Promise(t=>window.setTimeout(t,100)),u={BLACK:0,PINK:1,PURPLE:2,BLUE:3,LIGHT_BLUE:4,LIGHT_GREEN:5,GREEN:6,YELLOW:7,ORANGE:8,RED:9,WHITE:10,NONE:-1},d={BRAKE:3,DEPARTURE:5,REFILL:7,HORN:9,STEAM:10},p={MOTOR:0,SPEAKER:1,RGB_LIGHT:17,COLOR_SENSOR:18,SPEEDOMETER:19};t.extensions.register(new(class A{static get EXTENSION_ID(){return"duplotrain"}constructor(){this._peripheral=new o(t.vm.runtime,A.EXTENSION_ID,32)}getInfo(){return{id:A.EXTENSION_ID,name:"DUPLO Train",extensionURL:A.extensionURL,blockIconURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAUKADAAQAAAABAAAAUAAAAAAx4ExPAAAEl0lEQVR4Ae2bT0jUQRTHZ9xV1/4cMio0aUUqyoQKuniooLBO0amgoi55icLASwpWYkZ2KZKii12KDJSg6JYUVAePGtQSFZLiHzCyQ5pbrk7zdnfW3WXmN7PO+ts/vQX5zW/em3m/99nvvPntz11C8IUEkAASQAJIAAkgASSABJAAEkACSAAJIAEk4B4BahrqzQvCZL77j5DwHDq7bGw+9BXkQxKZzEGpQJWi3L5YoXC345rGQwWaklL4eRX9se59tbGmq423/a6GW3IwVOCS0UUGahWYK0ow5fCtdqf0bqKy/71yP3CaGxXoRMfApqUu3jG/v8ZgOnuX4eEP4UmSFcGOHSsaGfvaRgg7wxgri49EKZ0ghD7ctHHzFdrb+zfeJtrDtbs+MsKqxbnsSAkN+PsHd8hsqr6cUSDAY2zhUjI8SAz6wBYBrEiVkl6FZbGbkp7FE7OWtgaaTeOGFzsDUTas9xNfyeqEgLOzv8jk5DDvC/s0JRjFiYf2kBC76inwsIqKbVxs0cXHGBkd/cTmF+Yp8VA9ZDFf9JgzChTXLd0BhNHh6H83EIAlCqCCwZmYJ7ShL7x8uU/MYNiwroGiZhnGi7mpaqqYD+qabLnGJliGhkktTQ6btUvYbXgAJhKTQS2FU3kpAEvcK20Ak3fNuBgJTbGrJ3RKTmS1TuKW1i6jWpoUMWtrYPJGkXTdy3JaEt2cUlF/1gJcFkLLMCkCtISKABGgJQHL4ahABGhJwHI4KhABWhKwHJ62TyKmnzAsrzfrhuMStnxLrBWoeqpieV05MzxrFQgf7N1+iZiRx1pm0a0VaBYmda/IE+bUx6VjBDxMEDVd95QpaxWYDhBuzJF1CsyWmiqejOveBFSgjpDGjgA1gHRmBKgjpLEjQA0gnRkB6ghp7Mr/C7fceLzU/2FrQuamub35lJQVKtDy/dTeB34eeG4ZIreHb9191DEBVKAjHr1Rq0D9FLntcaez0yiB9ma5GypQzsW4V6lA/nWvaf6NzlXeQh8JzQWNJ8w1x4sNDcpLhtyrag7zn2LRaZWTkwI/wqCSVWtVY/O+Py73MAtZwk4Au2DAuooaVuAplI3N6z7IGXKPJhlmIUtYenMIjvyhIr1ys7uPfwP2YCgUZN9HP9DZ6R95vZwhb1i2oDyA5/X6+MNp8qrt0sk63hAwwS32UtdAPuD67aeng3+Cj/hEB8sq98QG/SeNMDxfse+0Ch5wUCpQQAorsePJWX5ez/92wMYibPl4jG4YUPO62ppOPHCCB/lrAZpAaul4fJf/mvj8yhXFrG5vNd1YXiodNjY+RfreBdjM7z/8Osm99qZTF6SOKXZmMr5yCaeSg7eqsDE0FNrOwRx49nKQVW8po9Vby0npmohYp35Ok8DncRL4MsEFzDg8+tpb5W1MJYaTbybjp0WBkFxrT09RaGjuFi+153i1le7uPNgCx3cfEm49flz6iyInUE62TMVPG0CR3OWObvipVD1X2iFeITZF+tkIV91L3u661nRSeU8l5rA5Zjq+zbXjWCSABJAAEkACSAAJIAEkgASQABJAAkgACSABHYF/doZ0OkkMt+gAAAAASUVORK5CYII=",showStatusButton:!0,blocks:[{opcode:"motorPWM",text:a({id:"duplotrain.motorPWM",default:"run [DIRECTION] at [POWER] % power"}),blockType:l.COMMAND,arguments:{DIRECTION:{type:r.NUMBER,menu:"DIRECTION",defaultValue:1},POWER:{type:r.NUMBER,defaultValue:50}}},{opcode:"motorStop",text:a({id:"duplotrain.motorStop",default:"stop"}),blockType:l.COMMAND},"---",{opcode:"playSound",text:a({id:"duplotrain.playSound",default:"play [SOUND] sound"}),blockType:l.COMMAND,arguments:{SOUND:{type:r.NUMBER,menu:"SOUND",defaultValue:d.BRAKE}}},{opcode:"setHubLEDColor",text:a({id:"duplotrain.setHubLEDColor",default:"set light color to [COLOR]"}),blockType:l.COMMAND,arguments:{COLOR:{type:r.NUMBER,menu:"LED_COLOR",defaultValue:u.BLUE}}},"---",{opcode:"whenColor",text:a({id:"duplotrain.whenColor",default:"when passing over [SENSOR_COLOR] action block"}),blockType:l.HAT,arguments:{SENSOR_COLOR:{type:r.NUMBER,menu:"SENSOR_COLOR",defaultValue:u.BLUE}}},{opcode:"getDrivingDistance",text:a({id:"duplotrain.getDrivingDistance",default:"driving distance"}),blockType:l.REPORTER}],menus:{DIRECTION:{acceptReporters:!1,items:[{text:"⬆︎",value:"1"},{text:"⬇",value:"-1"}]},SOUND:{acceptReporters:!1,items:[{text:a({id:"duplotrain.brake",default:"brake"}),value:String(d.BRAKE)},{text:a({id:"duplotrain.departure",default:"departure"}),value:String(d.DEPARTURE)},{text:a({id:"duplotrain.refill",default:"refill"}),value:String(d.REFILL)},{text:a({id:"duplotrain.horn",default:"horn"}),value:String(d.HORN)},{text:a({id:"duplotrain.steam",default:"steam"}),value:String(d.STEAM)}]},LED_COLOR:{acceptReporters:!0,items:[{text:a({id:"legobluetooth.black",default:"Black"}),value:String(u.BLACK)},{text:a({id:"legobluetooth.pink",default:"Pink"}),value:String(u.PINK)},{text:a({id:"legobluetooth.purple",default:"Purple"}),value:String(u.PURPLE)},{text:a({id:"legobluetooth.blue",default:"Blue"}),value:String(u.BLUE)},{text:a({id:"legobluetooth.lightBlue",default:"Light blue"}),value:String(u.LIGHT_BLUE)},{text:a({id:"legobluetooth.lightGreen",default:"Light green"}),value:String(u.LIGHT_GREEN)},{text:a({id:"legobluetooth.green",default:"Green"}),value:String(u.GREEN)},{text:a({id:"legobluetooth.yellow",default:"Yellow"}),value:String(u.YELLOW)},{text:a({id:"legobluetooth.orange",default:"Orange"}),value:String(u.ORANGE)},{text:a({id:"legobluetooth.red",default:"Red"}),value:String(u.RED)},{text:a({id:"legobluetooth.white",default:"White"}),value:String(u.WHITE)}]},SENSOR_COLOR:{acceptReporters:!1,items:[{text:a({id:"duplotrain.blue",default:"Blue"}),value:String(u.BLUE)},{text:a({id:"duplotrain.lightGreen",default:"Green"}),value:String(u.LIGHT_GREEN)},{text:a({id:"duplotrain.yellow",default:"Yellow"}),value:String(u.YELLOW)},{text:a({id:"duplotrain.red",default:"Red"}),value:String(u.RED)},{text:a({id:"duplotrain.white",default:"White"}),value:String(u.WHITE)}]}}}}motorPWM(t){var e=i.toNumber(t.POWER),t=t.DIRECTION;return this._peripheral.motorPWM(p.MOTOR,e*t).then(n)}motorStop(){return this._peripheral.motorPWM(p.MOTOR,0).then(n)}playSound(t){return t=t.SOUND,this._peripheral.sendOutputCommand(p.SPEAKER,81,[1,t]).then(n)}setHubLEDColor(t){return t=i.toNumber(t.COLOR),this._peripheral.setLEDColor(t).then(n)}whenColor(t){return this.getColor()==t.SENSOR_COLOR}isColor(t){return this.getColor()==t.SENSOR_COLOR}getColor(){return this._getSensorValue(p.COLOR_SENSOR,"color",-1)}getDrivingDistance(){return this._getSensorValue(p.SPEEDOMETER,"drivingDistance",0)}_getSensorValue(t,e,o){return null!=(t=this._peripheral.inputValue(t,e))?t:o}})),t.extensions.translations({en:{"duplotrain.motorPWM":"run [DIRECTION] at [POWER] % power","duplotrain.motorStop":"stop","duplotrain.playSound":"play [SOUND] sound","duplotrain.setHubLEDColor":"set light color to [COLOR]","duplotrain.whenColor":"when passing over [SENSOR_COLOR] action block","duplotrain.isColor":"ground color is [SENSOR_COLOR] ?","duplotrain.getColor":"ground color","duplotrain.getDrivingDistance":"driving distance","duplotrain.brake":"brake","duplotrain.departure":"departure","duplotrain.refill":"refill","duplotrain.horn":"horn","duplotrain.steam":"steam","duplotrain.blue":"blue","duplotrain.lightGreen":"green","duplotrain.yellow":"yellow","duplotrain.red":"red","duplotrain.white":"white"},"zh-cn":{"duplotrain.motorPWM":"开启 [DIRECTION] 方向动力为 [POWER] %","duplotrain.motorStop":"停止","duplotrain.playSound":"播放 [SOUND] 声音","duplotrain.setHubLEDColor":"设置灯光颜色为 [COLOR]","duplotrain.whenColor":"当通过的颜色是 [SENSOR_COLOR]","duplotrain.isColor":"轨道颜色是 [SENSOR_COLOR] ?","duplotrain.getColor":"轨道颜色","duplotrain.getDrivingDistance":"行驶距离","duplotrain.brake":"刹车","duplotrain.departure":"启程","duplotrain.refill":"回填","duplotrain.horn":"鸣笛","duplotrain.steam":"蒸汽","duplotrain.blue":"蓝","duplotrain.lightGreen":"绿","duplotrain.yellow":"黄","duplotrain.red":"红","duplotrain.white":"白"},"zh-tw":{"duplotrain.motorPWM":"開啟 [DIRECTION] 方向動力為 [POWER] %","duplotrain.motorStop":"停止","duplotrain.playSound":"播放 [SOUND] 聲音","duplotrain.setHubLEDColor":"設置燈光顏色為 [COLOR]","duplotrain.whenColor":"當通過的顏色是 [SENSOR_COLOR]","duplotrain.isColor":"軌道顏色是 [SENSOR_COLOR] ?","duplotrain.getColor":"軌道顏色","duplotrain.getDrivingDistance":"行駛距離","duplotrain.brake":"剎車","duplotrain.departure":"啟程","duplotrain.refill":"回填","duplotrain.horn":"鳴笛","duplotrain.steam":"蒸汽","duplotrain.blue":"藍","duplotrain.lightGreen":"綠","duplotrain.yellow":"黃","duplotrain.red":"紅","duplotrain.white":"白"}})})(Scratch,require);